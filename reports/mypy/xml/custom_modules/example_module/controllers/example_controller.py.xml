<?xml-stylesheet type="text/xsl" href="../../../../mypy-html.xslt"?><mypy-report-file name="custom_modules/example_module/controllers/example_controller.py" module="custom_modules.example_module.controllers.example_controller"><line any_info="No Anys on this line!" content="import json" number="1" precision="precise"/><line any_info="No Anys on this line!" content="" number="2" precision="empty"/><line any_info="No Anys on this line!" content="from odoo import http" number="3" precision="any"/><line any_info="No Anys on this line!" content="from odoo.http import request" number="4" precision="any"/><line any_info="No Anys on this line!" content="" number="5" precision="empty"/><line any_info="No Anys on this line!" content="" number="6" precision="empty"/><line any_info="No Anys on this line!" content="class ExampleController(http.Controller):" number="7" precision="precise"/><line any_info="No Anys on this line!" content="    &quot;&quot;&quot;Example controller to demonstrate API endpoints.&quot;&quot;&quot;" number="8" precision="empty"/><line any_info="No Anys on this line!" content="" number="9" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="    @http.route('/api/example/list', type='json', auth='user', methods=['POST'])" number="10" precision="any"/><line any_info="No Anys on this line!" content="    def list_examples(self, **kwargs):" number="11" precision="any"/><line any_info="No Anys on this line!" content="        &quot;&quot;&quot;List all example records.&quot;&quot;&quot;" number="12" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        domain = []" number="13" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        if kwargs.get('name'):" number="14" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="            domain.append(('name', 'ilike', kwargs['name']))" number="15" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        if kwargs.get('state'):" number="16" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="            domain.append(('state', '=', kwargs['state']))" number="17" precision="any"/><line any_info="No Anys on this line!" content="" number="18" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x1)" content="        examples = request.env['example.model'].search(domain)" number="19" precision="any"/><line any_info="No Anys on this line!" content="        return [" number="20" precision="empty"/><line any_info="No Anys on this line!" content="            {" number="21" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                'id': example.id," number="22" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                'name': example.name," number="23" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                'description': example.description," number="24" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                'value': example.value," number="25" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                'state': example.state," number="26" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                'total_value': example.total_value," number="27" precision="any"/><line any_info="No Anys on this line!" content="            }" number="28" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            for example in examples" number="29" precision="any"/><line any_info="No Anys on this line!" content="        ]" number="30" precision="empty"/><line any_info="No Anys on this line!" content="" number="31" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="    @http.route('/api/example/&lt;int:example_id&gt;', type='json', auth='user', methods=['POST'])" number="32" precision="any"/><line any_info="No Anys on this line!" content="    def get_example(self, example_id, **kwargs):" number="33" precision="any"/><line any_info="No Anys on this line!" content="        &quot;&quot;&quot;Get a specific example record.&quot;&quot;&quot;" number="34" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x1)" content="        example = request.env['example.model'].browse(example_id)" number="35" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        if not example.exists():" number="36" precision="any"/><line any_info="No Anys on this line!" content="            return {'error': 'Example not found'}" number="37" precision="any"/><line any_info="No Anys on this line!" content="" number="38" precision="empty"/><line any_info="No Anys on this line!" content="        return {" number="39" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            'id': example.id," number="40" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            'name': example.name," number="41" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            'description': example.description," number="42" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            'value': example.value," number="43" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            'state': example.state," number="44" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            'total_value': example.total_value," number="45" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="            'partner_id': example.partner_id.id if example.partner_id else None," number="46" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="            'partner_name': example.partner_id.name if example.partner_id else None," number="47" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            'tag_ids': example.tag_ids.ids," number="48" precision="any"/><line any_info="No Anys on this line!" content="            'line_ids': [" number="49" precision="any"/><line any_info="No Anys on this line!" content="                {" number="50" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                    'id': line.id," number="51" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                    'name': line.name," number="52" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                    'value': line.value," number="53" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                    'notes': line.notes," number="54" precision="any"/><line any_info="No Anys on this line!" content="                }" number="55" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                for line in example.line_ids" number="56" precision="any"/><line any_info="No Anys on this line!" content="            ]," number="57" precision="empty"/><line any_info="No Anys on this line!" content="        }" number="58" precision="empty"/><line any_info="No Anys on this line!" content="" number="59" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="    @http.route('/api/example/create', type='json', auth='user', methods=['POST'])" number="60" precision="any"/><line any_info="No Anys on this line!" content="    def create_example(self, **kwargs):" number="61" precision="any"/><line any_info="No Anys on this line!" content="        &quot;&quot;&quot;Create a new example record.&quot;&quot;&quot;" number="62" precision="empty"/><line any_info="No Anys on this line!" content="        try:" number="63" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            vals = {" number="64" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                'name': kwargs.get('name')," number="65" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                'description': kwargs.get('description')," number="66" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                'value': kwargs.get('value', 0.0)," number="67" precision="any"/><line any_info="No Anys on this line!" content="            }" number="68" precision="empty"/><line any_info="No Anys on this line!" content="" number="69" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            if kwargs.get('partner_id'):" number="70" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                vals['partner_id'] = kwargs['partner_id']" number="71" precision="any"/><line any_info="No Anys on this line!" content="" number="72" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x1)" content="            example = request.env['example.model'].create(vals)" number="73" precision="any"/><line any_info="No Anys on this line!" content="" number="74" precision="empty"/><line any_info="No Anys on this line!" content="            # Add lines if provided" number="75" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            if kwargs.get('lines'):" number="76" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                for line_vals in kwargs['lines']:" number="77" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                    line_vals['example_id'] = example.id" number="78" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="                    request.env['example.line'].create(line_vals)" number="79" precision="any"/><line any_info="No Anys on this line!" content="" number="80" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            return {'success': True, 'id': example.id, 'message': 'Example created successfully'}" number="81" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        except Exception as e:" number="82" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            return {'success': False, 'error': str(e)}" number="83" precision="any"/><line any_info="No Anys on this line!" content="" number="84" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="    @http.route('/api/example/&lt;int:example_id&gt;/action', type='json', auth='user', methods=['POST'])" number="85" precision="any"/><line any_info="No Anys on this line!" content="    def example_action(self, example_id, action, **kwargs):" number="86" precision="any"/><line any_info="No Anys on this line!" content="        &quot;&quot;&quot;Perform an action on an example record.&quot;&quot;&quot;" number="87" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x1)" content="        example = request.env['example.model'].browse(example_id)" number="88" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        if not example.exists():" number="89" precision="any"/><line any_info="No Anys on this line!" content="            return {'error': 'Example not found'}" number="90" precision="any"/><line any_info="No Anys on this line!" content="" number="91" precision="empty"/><line any_info="No Anys on this line!" content="        try:" number="92" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            if action == 'confirm':" number="93" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                example.action_confirm()" number="94" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            elif action == 'done':" number="95" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                example.action_done()" number="96" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            elif action == 'cancel':" number="97" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                example.action_cancel()" number="98" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            elif action == 'reset':" number="99" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                example.action_reset_to_draft()" number="100" precision="any"/><line any_info="No Anys on this line!" content="            else:" number="101" precision="empty"/><line any_info="No Anys on this line!" content="                return {'error': 'Invalid action'}" number="102" precision="any"/><line any_info="No Anys on this line!" content="" number="103" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="            return {'success': True, 'state': example.state, 'message': f'Action {action} completed successfully'}" number="104" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        except Exception as e:" number="105" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            return {'success': False, 'error': str(e)}" number="106" precision="any"/><line any_info="No Anys on this line!" content="" number="107" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="    @http.route('/api/example/stats', type='json', auth='user', methods=['POST'])" number="108" precision="any"/><line any_info="No Anys on this line!" content="    def get_stats(self, **kwargs):" number="109" precision="any"/><line any_info="No Anys on this line!" content="        &quot;&quot;&quot;Get statistics about example records.&quot;&quot;&quot;" number="110" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        domain = []" number="111" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        if kwargs.get('date_from'):" number="112" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="            domain.append(('create_date', '&gt;=', kwargs['date_from']))" number="113" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        if kwargs.get('date_to'):" number="114" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="            domain.append(('create_date', '&lt;=', kwargs['date_to']))" number="115" precision="any"/><line any_info="No Anys on this line!" content="" number="116" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x1)" content="        examples = request.env['example.model'].search(domain)" number="117" precision="any"/><line any_info="No Anys on this line!" content="" number="118" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        stats = {" number="119" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            'total_count': len(examples)," number="120" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Omitted Generics (x6)&#10;Explicit (x8)" content="            'total_value': sum(examples.mapped('total_value'))," number="121" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x8)&#10;Omitted Generics (x6)&#10;Explicit (x8)" content="            'average_value': sum(examples.mapped('total_value')) / len(examples) if examples else 0," number="122" precision="any"/><line any_info="No Anys on this line!" content="            'state_counts': {}," number="123" precision="any"/><line any_info="No Anys on this line!" content="        }" number="124" precision="empty"/><line any_info="No Anys on this line!" content="" number="125" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        for state in ['draft', 'confirmed', 'done', 'cancelled']:" number="126" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x10)" content="            stats['state_counts'][state] = len(examples.filtered(lambda x: x.state == state))" number="127" precision="any"/><line any_info="No Anys on this line!" content="" number="128" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        return stats" number="129" precision="any"/></mypy-report-file>
